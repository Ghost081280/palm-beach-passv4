<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palm Beach Pass - Your Gateway to Paradise</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2D5016">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Palm Beach Pass">
    <meta name="description" content="Discover premium attractions with Palm Beach Pass. Save 50% on 156+ experiences across Palm Beach County.">
    
    <!-- PWA Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl82NF8yMSkiLz4KPHA+8J+MtDwvcD4KPGRBMXM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQwX2xpbmVhcl82NF8yMSIgeDE9IjAiIHkxPSIwIiB4Mj0iMzIiIHkyPSIzMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMkQ1MDE2Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwNkI3RCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-header">
        <div class="nav-content">
            <div class="logo" onclick="scrollToTop()">
                <div class="logo-icon">üå¥</div>
                <div class="logo-text">Palm Beach <span>Pass</span></div>
            </div>
            
            <div class="nav-links">
                <a href="#passes" class="nav-link">Passes</a>
                <a href="#attractions" class="nav-link">Attractions</a>
                <a href="#how-it-works" class="nav-link">How It Works</a>
            </div>
            
            <div class="user-menu">
                <div class="cart-icon" onclick="showCart()">
                    üõí
                    <span class="cart-badge" id="cartCount" style="display: none;">0</span>
                </div>
                <button class="btn-login" id="loginBtn" onclick="showLogin()">Sign In</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Experience <span>Palm Beach</span> Like Never Before</h1>
            <p>One pass, endless adventures. Discover 156+ premium attractions, restaurants, and experiences across Palm Beach County.</p>
            <div class="hero-cta">
                <button class="btn-primary" onclick="scrollToSection('passes')">Get Your Pass</button>
                <button class="btn-secondary" onclick="scrollToSection('attractions')">Explore Attractions</button>
            </div>
        </div>
    </section>

    <!-- Pass Selection -->
    <section class="pass-selection" id="passes">
        <div class="section-header">
            <h2>Choose Your Perfect Pass</h2>
            <p>Select from our flexible pass options and save up to 50% on attractions</p>
        </div>
        
        <div class="pass-grid" id="passGrid">
            <!-- Passes loaded from data/passes.json -->
        </div>
    </section>

    <!-- Attractions Section -->
    <section class="attractions-preview" id="attractions">
        <div class="attractions-promo">
            <div class="promo-content">
                <h1 class="promo-title">CHOOSE FROM 156 ATTRACTIONS</h1>
                <h2 class="promo-subtitle">FREE WITH PALM BEACH PASS</h2>
                <p class="promo-description">Access premium experiences, attractions, and dining. One payment for unlimited access.</p>
                
                <div class="promo-stats">
                    <div class="stat-item">
                        <span class="stat-number">156+</span>
                        <div class="stat-label">Attractions</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">50%</span>
                        <div class="stat-label">Average Savings</div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">200K+</span>
                        <div class="stat-label">Happy Visitors</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map Section -->
        <div class="map-section">
            <div class="map-container" id="mapContainer">
                <div id="map" style="width: 100%; height: 500px;"></div>
                <!-- Fallback for when maps don't load -->
                <div id="mapFallback" class="map-fallback" style="display: none;">
                    <div class="fallback-content">
                        <h3>üó∫Ô∏è Attractions Map</h3>
                        <p>Interactive map loading... Meanwhile, browse our featured attractions below!</p>
                    </div>
                </div>
            </div>
            
            <!-- Map Filters -->
            <div class="map-filters">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-category="all" onclick="filterAttractions('all')">All</button>
                    <button class="filter-tab" data-category="family" onclick="filterAttractions('family')">Family</button>
                    <button class="filter-tab" data-category="culture" onclick="filterAttractions('culture')">Culture</button>
                    <button class="filter-tab" data-category="shopping" onclick="filterAttractions('shopping')">Shopping</button>
                    <button class="filter-tab" data-category="nature" onclick="filterAttractions('nature')">Nature</button>
                    <button class="filter-tab" data-category="dining" onclick="filterAttractions('dining')">Dining</button>
                </div>
            </div>
        </div>

        <!-- Featured Attractions Grid -->
        <div class="attractions-container">
            <div class="attractions-header">
                <h3>Featured Attractions</h3>
                <button class="btn-view-all" onclick="viewAllAttractions()">View All 156+</button>
            </div>
            <div class="attractions-grid" id="attractionsGrid">
                <!-- Attractions loaded from data/attractions.json -->
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section class="how-it-works" id="how-it-works">
        <div class="section-header">
            <h2>How It Works</h2>
            <p>Get started in just three easy steps</p>
        </div>
        
        <div class="steps-grid">
            <div class="step-card">
                <div class="step-icon">üé´</div>
                <div class="step-number">1</div>
                <h3>Choose Your Pass</h3>
                <p>Select the perfect pass duration for your Palm Beach adventure</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">üì±</div>
                <div class="step-number">2</div>
                <h3>Get Your QR Code</h3>
                <p>Receive your digital pass instantly with QR codes for each attraction</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">üèñÔ∏è</div>
                <div class="step-number">3</div>
                <h3>Start Exploring</h3>
                <p>Show your QR code at any attraction for instant, skip-the-line entry</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Palm Beach Pass</h3>
                <p>Your gateway to experiencing the best of Palm Beach County. One pass, endless memories.</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#passes">Buy Passes</a></li>
                    <li><a href="#attractions">View Attractions</a></li>
                    <li><a href="customer-account.html">My Account</a></li>
                    <li><a href="#how-it-works">How It Works</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Support</h3>
                <ul class="footer-links">
                    <li><a href="#">FAQs</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Connect</h3>
                <ul class="footer-links">
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">YouTube</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 Palm Beach Pass. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('loginModal')">√ó</button>
            <h2>Welcome Back</h2>
            
            <form id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="loginEmail" placeholder="demo@palmbeachpass.com" required>
                </div>
                
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                
                <button type="submit" class="btn-submit" id="loginSubmitBtn">
                    <span id="loginText">Sign In</span>
                    <span id="loginSpinner" class="loading" style="display: none;"></span>
                </button>
                
                <div class="form-footer">
                    <p>Don't have an account? <a href="#" onclick="showSignup()">Sign up</a></p>
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-light);">Demo: demo@palmbeachpass.com / demo123</p>
                </div>
            </form>
        </div>
    </div>

    <!-- Install Banner -->
    <div class="install-banner" id="installBanner">
        <div class="install-content">
            <div class="install-icon">üì±</div>
            <div class="install-text">
                <div class="install-title">Install Palm Beach Pass</div>
                <div class="install-subtitle">Get the full app experience</div>
            </div>
        </div>
        <div class="install-actions">
            <button class="btn-install" onclick="installApp()">Install</button>
            <button class="btn-dismiss" onclick="dismissInstall()">√ó</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Initialize mock Google Maps for demo
        function initMap() {
            if (window.AppInstance && window.AppInstance.initializeMap) {
                window.AppInstance.initializeMap();
            } else {
                console.log('Google Maps initialized, waiting for app instance...');
                setTimeout(() => {
                    if (window.AppInstance && window.AppInstance.initializeMap) {
                        window.AppInstance.initializeMap();
                    }
                }, 1000);
            }
        }
        
        // Mock Google Maps API for demo purposes
        function loadMockGoogleMaps() {
            console.log('Loading mock Google Maps for demo...');
            
            // Create mock google.maps namespace
            window.google = window.google || {};
            window.google.maps = {
                Map: function(element, options) {
                    console.log('Mock Google Maps initialized');
                    this.element = element;
                    this.options = options;
                    
                    // Create a visual map placeholder
                    element.innerHTML = `
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); position: relative; border-radius: 10px; overflow: hidden;">
                            <div style="position: absolute; top: 20px; left: 20px; color: white; font-weight: bold; font-size: 18px;">
                                üó∫Ô∏è Palm Beach County Interactive Map
                            </div>
                            <div style="position: absolute; bottom: 20px; right: 20px; color: rgba(255,255,255,0.8); font-size: 12px;">
                                Demo Mode - Attractions shown below
                            </div>
                            <div id="mockMarkers" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        initMap();
                    }, 100);
                    
                    return this;
                },
                
                Marker: function(options) {
                    this.options = options;
                    this.visible = true;
                    this.listeners = {};
                    
                    // Create visual marker
                    const mockMarkers = document.getElementById('mockMarkers');
                    if (mockMarkers) {
                        const marker = document.createElement('div');
                        marker.style.cssText = `
                            position: absolute;
                            width: 30px;
                            height: 30px;
                            background: ${this.getMarkerColor(options.category)};
                            border: 2px solid white;
                            border-radius: 50%;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 14px;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                            transition: all 0.3s;
                            left: ${Math.random() * 85 + 5}%;
                            top: ${Math.random() * 70 + 15}%;
                        `;
                        marker.innerHTML = options.icon?.emoji || 'üìç';
                        marker.title = options.title;
                        
                        marker.addEventListener('click', () => {
                            if (this.listeners.click) {
                                this.listeners.click.forEach(callback => callback());
                            }
                        });
                        
                        marker.addEventListener('mouseenter', () => {
                            marker.style.transform = 'scale(1.2)';
                            marker.style.zIndex = '10';
                        });
                        
                        marker.addEventListener('mouseleave', () => {
                            marker.style.transform = 'scale(1)';
                            marker.style.zIndex = '1';
                        });
                        
                        mockMarkers.appendChild(marker);
                        this.element = marker;
                    }
                    
                    return this;
                },
                
                InfoWindow: function(options) {
                    this.options = options;
                    this.isOpen = false;
                    
                    this.open = (map, marker) => {
                        // Close other info windows first
                        document.querySelectorAll('.mock-info-window').forEach(w => w.remove());
                        
                        const infoWindow = document.createElement('div');
                        infoWindow.className = 'mock-info-window';
                        infoWindow.style.cssText = `
                            position: absolute;
                            background: white;
                            border-radius: 8px;
                            padding: 15px;
                            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
                            max-width: 250px;
                            z-index: 1000;
                            border: 1px solid #e0e0e0;
                            font-size: 14px;
                            left: ${marker.element.offsetLeft + 35}px;
                            top: ${marker.element.offsetTop}px;
                        `;
                        infoWindow.innerHTML = this.options.content;
                        
                        const closeBtn = document.createElement('button');
                        closeBtn.innerHTML = '√ó';
                        closeBtn.style.cssText = `
                            position: absolute;
                            top: 5px;
                            right: 8px;
                            background: none;
                            border: none;
                            font-size: 18px;
                            cursor: pointer;
                            color: #666;
                        `;
                        closeBtn.onclick = () => infoWindow.remove();
                        infoWindow.appendChild(closeBtn);
                        
                        document.getElementById('mockMarkers').appendChild(infoWindow);
                        this.isOpen = true;
                    };
                    
                    this.close = () => {
                        document.querySelectorAll('.mock-info-window').forEach(w => w.remove());
                        this.isOpen = false;
                    };
                    
                    return this;
                },
                
                Animation: {
                    DROP: 'drop',
                    BOUNCE: 'bounce'
                },
                
                Size: function(width, height) {
                    return { width, height };
                },
                
                Point: function(x, y) {
                    return { x, y };
                }
            };
            
            // Add marker color helper to prototype
            window.google.maps.Marker.prototype.getMarkerColor = function(category) {
                const colors = {
                    shopping: '#FFD700',
                    culture: '#8A2BE2', 
                    family: '#90EE90',
                    nature: '#20B2AA',
                    dining: '#DAA520',
                    adventure: '#FF6B6B'
                };
                return colors[category] || '#2D5016';
            };
            
            window.google.maps.Marker.prototype.addListener = function(event, callback) {
                if (!this.listeners[event]) this.listeners[event] = [];
                this.listeners[event].push(callback);
            };
            
            window.google.maps.Marker.prototype.setMap = function(map) {
                // Mock setMap functionality
            };
            
            window.google.maps.Marker.prototype.setVisible = function(visible) {
                this.visible = visible;
                if (this.element) {
                    this.element.style.display = visible ? 'flex' : 'none';
                }
            };
            
            window.google.maps.Marker.prototype.setAnimation = function(animation) {
                if (this.element && animation === 'bounce') {
                    this.element.style.animation = 'bounce 1s ease';
                    setTimeout(() => {
                        if (this.element) this.element.style.animation = '';
                    }, 1000);
                }
            };
            
            window.google.maps.Marker.prototype.getAnimation = function() {
                return this.element?.style.animation ? 'bounce' : null;
            };
            
            // Add bounce animation CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes bounce {
                    0%, 20%, 60%, 100% { transform: translateY(0) scale(1); }
                    40% { transform: translateY(-10px) scale(1.1); }
                    80% { transform: translateY(-5px) scale(1.05); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Load mock maps immediately
        loadMockGoogleMaps();
        
        // Initialize the map when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (window.google && window.google.maps) {
                    initMap();
                }
            }, 500);
        });
    </script>
</body>
</html>
